syntax = "proto3";

package metrigo;

option go_package = "github.com/Matyjash/Metrigoio/pb;pb";

service Metrigo {
    rpc GetMemoryUsage(MemoryUsageReq) returns (MemoryUsageRes);
    rpc GetCpuInfo(CpuInfoReq) returns (CpuInfoRes);
    rpc GetTemperatures(TemperatureReq) returns (TemperatureRes);
    rpc GetHostInfo(HostInfoReq) returns (HostInfoRes);
    rpc GetNetInfo(NetInfoReq) returns (NetInfoRes);
}

message MemoryUsageReq {}
message MemoryUsageRes {
    uint64 totalB = 1;
    uint64 usedB = 2;
}

message CpuInfoReq {}
message CpuInfo {
    string id =1;
    float usagePercent = 2;
    float frequency = 3;
}
message CpuInfoRes {
    repeated CpuInfo cpuInfo =1;
}

message TemperatureReq {}
message TemperatureSensor {
    string key = 1;
    float value = 2;
}
message TemperatureRes {
    repeated TemperatureSensor sensors = 1;
}

message HostInfoReq {}
message HostInfoRes {
    string hostname = 1;
    string os = 2;
    string platform = 3;
    string platformVersion = 4;
    uint64 uptime = 5;
}

message NetInfoReq {}
message NetInterface {
    string name = 1;
    uint32 index = 2;
    repeated string addresses = 3;
    uint64 MTU = 4;
}
message NetInfoRes {
    repeated NetInterface interfaces = 1;
}
